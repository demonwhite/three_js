function initPlayer(){document.getElementById("audio").appendChild(audio),context=new AudioContext,analyser=context.createAnalyser(),canvas=document.getElementById("bar"),actx=canvas.getContext("2d"),source=context.createMediaElementSource(audio),source.connect(analyser),analyser.connect(context.destination),frameLooper()}function frameLooper(){window.requestAnimationFrame(frameLooper),fbc_array=new Uint8Array(analyser.frequencyBinCount),analyser.getByteFrequencyData(fbc_array),actx.clearRect(0,0,canvas.width,canvas.height),actx.fillStyle="#00CCFF",bars=100;for(var a=0;bars>a;a++)bar_x=3*a,bar_width=2,bar_height=-(fbc_array[a]/2),actx.fillRect(bar_x,canvas.height,bar_width,bar_height)}var audioCtx,audioCtx=new(window.AudioContext||window.webkitAudioContext),osc=audioCtx.createOscillator();osc.frequency.value=240,osc.connect(audioCtx.destination);var audio=new Audio;audio.src="sounds/day.mp3",audio.controls=!0,audio.loop=!1,audio.autoplay=!0;var actx,canvas,source,context,analyser,fbc_array,bars,bar_x,bar_width,bar_height;window.addEventListener("load",initPlayer,!1);